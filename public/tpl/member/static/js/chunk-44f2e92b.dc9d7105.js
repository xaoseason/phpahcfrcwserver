(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44f2e92b"],{"0a88":function(e,t,o){"use strict";o("b6ed")},"45ce":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o(e.who,{ref:"child",tag:"components",attrs:{mask:e.mask}})],1)},s=[],i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},r=[],n={name:"CaptchaTencent",props:["mask"],data(){return{}},mounted(){if(void 0===window.TencentCaptcha){let e=document.createElement("script"),t=document.getElementsByTagName("head")[0];e.type="text/javascript",e.charset="UTF-8",e.src="https://ssl.captcha.qq.com/TCaptcha.js",t.appendChild(e)}},created(){},computed:{},methods:{show(e){let t=this;if(""==t.$store.state.config.captcha_tencent_appid)return this.$message.error("请正确配置腾讯防水墙appid"),!1;var o=new window.TencentCaptcha(t.$store.state.config.captcha_tencent_appid,(function(t){0===t.ret&&e(t)}));o.show()}}},c=n,l=o("2877"),d=Object(l["a"])(c,i,r,!1,null,"6b7a70b0",null),h=d.exports,u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},p=[],m={name:"CaptchaVaptcha",props:["mask"],data(){return{}},mounted(){if(void 0===window.vaptcha){let e=document.createElement("script"),t=document.getElementsByTagName("head")[0];e.type="text/javascript",e.charset="UTF-8",e.src="https://v.vaptcha.com/v3.js",t.appendChild(e)}},created(){},computed:{},methods:{show(e){let t=this;if(""==t.$store.state.config.captcha_vaptcha_vid)return this.$message.error("请正确配置手势验证vid"),!1;window.vaptcha({vid:t.$store.state.config.captcha_vaptcha_vid,type:"invisible",scene:0,offline_server:""}).then((function(t){t.validate(),t.listen("pass",(function(){var o={code:t.getToken()};e(o)})),t.listen("close",(function(){}))}))}}},g=m,f=Object(l["a"])(g,u,p,!1,null,"7abd7660",null),_=f.exports,y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"验证码",visible:e.showDialog,modal:e.showMadal,width:"350px","close-on-press-escape":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showDialog=t}}},[o("el-form",{attrs:{"label-width":"0px",inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[o("el-form-item",{attrs:{label:" "}},[o("el-input",{ref:"ipt",staticStyle:{width:"120px"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handlerConfirm.apply(null,arguments)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),o("el-form-item",{attrs:{label:" "}},[o("img",{staticClass:"captcha_img",attrs:{src:e.src},on:{click:e.changeImg}})]),o("div",{staticClass:"clearfix"}),o("el-form-item",{attrs:{label:" "}},[o("el-button",{staticStyle:{width:"280px"},attrs:{type:"primary"},on:{click:e.handlerConfirm}},[e._v("确定")])],1)],1)],1)],1)},v=[],w=o("751a"),b=o("d722"),C={name:"CaptchaPicture",props:["mask"],data(){return{showDialog:!1,code:"",src:"",secret_str:"",callback:null,showMadal:!1}},mounted(){},created(){},computed:{},methods:{handlerConfirm(){if(""==this.code)return this.$message.error("请输入验证码"),!1;let e={code:this.code,secret_str:this.secret_str};this.callback(e),this.showDialog=!1,this.code=""},show(e){this.showDialog=!0,this.$nextTick(()=>{this.$refs.ipt.focus()}),this.callback=e,!0===this.mask&&(this.showMadal=!0),this.changeImg()},changeImg(){w["a"].get(b["a"].captcha_picture,{}).then(e=>{this.secret_str=e.data.secret_str,this.src=e.data.src}).catch(()=>{})}}},$=C,k=(o("0a88"),Object(l["a"])($,y,v,!1,null,"2ad42de7",null)),x=k.exports,S={name:"Captcha",props:["mask"],components:{ctencent:h,cvaptcha:_,cpicture:x},data(){return{who:""}},mounted(){},created(){this.who=""==this.$store.state.config.captcha_type?"picture":this.$store.state.config.captcha_type,this.who="c"+this.who},computed:{},methods:{show(e,t){1!=this.$store.state.config.captcha_open||void 0!==t&&!0!==t?e():this.$refs.child.show(e)}}},E=S,T=Object(l["a"])(E,a,s,!1,null,"b60cad64",null);t["a"]=T.exports},"65e6":function(e,t,o){"use strict";o("adee")},"71fb":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login_box",class:1==e.utype?"":"p"},[o("div",{staticClass:"b_group"},[1==e.$store.state.config.wechat_login_open?o("div",{class:e.scan?"b_sw aco":"b_sw",on:{click:e.showScan}}):e._e(),o("div",{staticClass:"login_tips",class:1==e.utype?"tips_color_2":"tips_color_1",on:{click:function(t){return t.stopPropagation(),e.$router.push(e.layout.utype_other_login_route)}}},[o("div",{staticClass:"text_1"},[e._v(e._s(1==e.utype?"我是求职者":"我是招聘方"))]),o("div",{staticClass:"text_2",on:{click:function(t){return t.stopPropagation(),e.$router.push(e.layout.utype_other_login_route)}}},[e._v(e._s(1==e.utype?"个人在此登录":"企业在此登录"))])]),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.scan,expression:"!scan"}]},[o("div",{staticClass:"b_title"},[e._v(e._s(e.layout.utype_current_text)+"登录")]),e.loginByCode?o("div",{staticClass:"b_input"},[o("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}},model:{value:e.formCode.mobile,callback:function(t){e.$set(e.formCode,"mobile",t)},expression:"formCode.mobile"}}),o("el-input",{attrs:{placeholder:"请输入验证码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.keyupSubmit.apply(null,arguments)}},model:{value:e.formCode.code,callback:function(t){e.$set(e.formCode,"code",t)},expression:"formCode.code"}}),o("div",{staticClass:"for_position"},[o("el-button",{style:"color:"+e.$store.state.sendSmsBtnTextColor,attrs:{type:"text"},on:{click:e.sendSms}},[e._v(e._s(e.$store.state.sendSmsBtnText))])],1)],1):o("div",{staticClass:"b_input"},[o("el-input",{attrs:{placeholder:"请输入手机号/用户名/邮箱",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}},model:{value:e.formPwd.username,callback:function(t){e.$set(e.formPwd,"username",t)},expression:"formPwd.username"}}),o("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}},model:{value:e.formPwd.password,callback:function(t){e.$set(e.formPwd,"password",t)},expression:"formPwd.password"}})],1),o("div",{staticClass:"b_handle"},[o("div",{staticClass:"h_left",on:{click:function(t){e.loginByCode=!e.loginByCode}}},[e._v(e._s(e.loginByCode?"账号密码登录":"手机验证码登录"))]),o("div",{staticClass:"h_right"},[o("router-link",{attrs:{to:"/forget/"+e.utype}},[e._v("忘记密码?")])],1),o("div",{staticClass:"clear"})]),o("el-button",{staticClass:"b_btn",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("立即登录")]),o("div",{staticClass:"b_reg"},[e._v("没有账号？"),o("router-link",{attrs:{to:"/reg"+(1==e.utype?"/company":"")}},[e._v("立即注册")])],1)],1)]),o("div",{staticClass:"clear"}),o("Captcha",{ref:"captcha",attrs:{mask:!0}})],1)},s=[],i=o("ed08"),r=o("e16f"),n=o("751a"),c=o("d722"),l=o("45ce"),d={name:"Login",components:{Captcha:l["a"]},data(){return{regularMobile:/^13[0-9]{9}$|14[0-9]{9}$|15[0-9]{9}$|18[0-9]{9}$|17[0-9]{9}$|16[0-9]{9}$|19[0-9]{9}$/,loginByCode:!1,scan:!1,layout:{utype_current_text:"企业招聘会员",utype_other_text:"求职者会员",utype_other_login_route:"",utype_current_reg_route:""},formPwd:{username:"",password:""},formCode:{mobile:"",code:""},utype:2,redirect:""}},watch:{utype:{immediate:!0,handler(){this.initLayout()}}},created(){let e=this.$route.query.code;if(void 0!==e)return this.$router.push("/oauth/weixin/"+e),!1;if("company"===this.$route.params.utype_alias?this.utype=1:(this.$route.params.utype_alias,this.utype=2),!0===Object(i["d"])())return location.href=this.$store.state.config.mobile_domain+"member/login",!1;if(void 0===window.WxLogin){let e=document.createElement("script"),t=document.getElementsByTagName("head")[0];e.type="text/javascript",e.charset="UTF-8",e.src="https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",t.appendChild(e)}this.$store.commit("clearCountDownFun")},methods:{showScan(){let e=this;this.scan=!this.scan,!0===this.scan&&new window.WxLogin({id:"wxlogin",appid:e.$store.state.config.wechat_open_appid,scope:"snsapi_login",redirect_uri:location.href,state:"",style:"",href:"data:text/css;base64,LmltcG93ZXJCb3ggLnFyY29kZSB7DQogIHdpZHRoOiAyMDBweDsNCn0NCi5pbXBvd2VyQm94IC5pbmZvIHsNCiAgd2lkdGg6IDIwMHB4Ow0KfQ0KLmltcG93ZXJCb3ggLnN0YXR1cyB7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0="})},handleExam(){if("undefined"!==typeof Storage){let o=localStorage.getItem("ExamSignUrl"),a=localStorage.getItem("EndExamNoticeTime"),s=localStorage.getItem("StartExamNoticeTime");if(void 0!=o&&null!=o&&""!=o&&void 0!=a&&null!=a&&""!=a&&void 0!=s&&null!=s&&""!=s){var e=new Date(a.replace(/-/g,"/")),t=new Date(s.replace(/-/g,"/"));if(t.getTime()<=(new Date).getTime()&&e.getTime()>=(new Date).getTime())return this.$confirm("检测到您从考试报名链接进行登录，是否进入报名页面？如不是您点击或不报名点击取消！","温馨提示",{confirmButtonText:"前往",cancelButtonText:"取消",type:"info"}).then(()=>{localStorage.removeItem("ExamSignUrl"),localStorage.removeItem("EndExamNoticeTime"),localStorage.removeItem("StartExamNoticeTime"),location.href=o}).catch(()=>{localStorage.removeItem("ExamSignUrl"),localStorage.removeItem("EndExamNoticeTime"),localStorage.removeItem("StartExamNoticeTime"),this.redirectTo()}),!1;this.redirectTo()}else this.redirectTo()}else console.error("浏览器不支持Storage");this.redirectTo()},initLayout(){this.redirect=void 0!==this.$route.query.redirect?this.$route.query.redirect:"",this.layout.utype_current_text=1===this.utype?"企业招聘会员":"求职者会员",this.layout.utype_other_text=1===this.utype?"求职者会员":"企业招聘会员",this.layout.utype_other_login_route=1===this.utype?"/login":"/login/company",this.layout.utype_current_reg_route=1===this.utype?"/reg/company":"/reg",this.redirect&&(this.layout.utype_other_login_route=this.layout.utype_other_login_route+"?redirect="+this.redirect,this.layout.utype_current_reg_route=this.layout.utype_current_reg_route+"?redirect="+this.redirect)},redirectTo(){""!==this.redirect?0==this.redirect.indexOf("http")?location.href=this.redirect:this.$router.push(this.redirect):1===this.utype?this.$router.push("/company"):this.$router.push("/personal")},doSubmitPwd(){if(!this.formPwd.username)return this.$message.error("请输入手机号/用户名/邮箱"),!1;if(!this.formPwd.password)return this.$message.error("请输入密码"),!1;let e={...this.formPwd};e.utype=this.utype,n["a"].get(c["a"].login_pwd,e).then(t=>{let o=!1;1==t.data&&(o=!0),this.$refs.captcha.show(t=>{void 0!==t&&(e.captcha=t),n["a"].post(c["a"].login_pwd,e).then(e=>{200===parseInt(e.code)?(this.$store.commit("clearCountDownFun"),this.$store.commit("setLoginState",{whether:!0,utype:e.data.utype,token:e.data.token,mobile:e.data.mobile,userIminfo:e.data.user_iminfo}),200!=e.data.next_code?Object(r["a"])({code:e.data.next_code,message:""}):this.handleExam()):this.$message.error(e.message)}).catch(()=>{})},o)}).catch(()=>{})},doSubmitCode(){if(!this.formCode.mobile)return this.$message.error("请输入手机号"),!1;if(!this.regularMobile.test(this.formCode.mobile))return this.$message.error("手机号格式不正确"),!1;let e={...this.formCode};e.utype=this.utype,n["a"].get(c["a"].login_code,e).then(t=>{let o=!1;1==t.data&&(o=!0),this.$refs.captcha.show(t=>{void 0!==t&&(e.captcha=t),n["a"].post(c["a"].login_code,e).then(e=>{200===parseInt(e.code)?(this.$store.commit("clearCountDownFun"),this.$store.commit("setLoginState",{whether:!0,utype:e.data.utype,token:e.data.token,mobile:e.data.mobile,userIminfo:e.data.user_iminfo}),200!=e.data.next_code?Object(r["a"])({code:e.data.next_code,message:""}):this.handleExam()):this.$message.error(e.message)}).catch(()=>{})},o)}).catch(()=>{})},handleSubmit(){this.loginByCode?this.doSubmitCode():this.doSubmitPwd()},keyupSubmit(){""!=this.formCode.code&&(this.loginByCode?this.doSubmitCode():this.doSubmitPwd())},sendSms(){return!this.$store.state.sendSmsBtnDisabled&&(this.formCode.mobile?this.regularMobile.test(this.formCode.mobile)?void this.$refs.captcha.show(e=>{this.$store.dispatch("sendSmsFun",{url:c["a"].get_login_code,mobile:this.formCode.mobile,type:this.utype,captcha:e}).then(e=>{200===e.code?this.$message({type:"success",message:this.$store.state.sendSmsMessage}):this.$message.error(this.$store.state.sendSmsMessage)})}):(this.$message.error("手机号格式不正确"),!1):(this.$message.error("请输入手机号"),!1))},qqLogin(){this.$router.push("/oauth/qq/login")}}},h=d,u=(o("65e6"),o("2877")),p=Object(u["a"])(h,a,s,!1,null,"8957269a",null);t["default"]=p.exports},adee:function(e,t,o){},b6ed:function(e,t,o){}}]);