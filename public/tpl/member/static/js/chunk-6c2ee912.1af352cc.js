(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c2ee912"],{"11a9":function(t,r,e){},"7fc7":function(t,r,e){"use strict";e("11a9")},a7c9:function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t._self._c;return r("div",{staticClass:"main"},[r("el-form",{ref:"form",attrs:{"label-width":"80px",model:t.form,rules:t.rules}},[r("el-form-item",{attrs:{label:"期望职位",prop:"categoryArr"}},[r("el-cascader",{ref:"intCategory",attrs:{placeholder:"请选择期望职位",options:t.columnsJobcategory,filterable:""},model:{value:t.form.categoryArr,callback:function(r){t.$set(t.form,"categoryArr",r)},expression:"form.categoryArr"}})],1),r("el-form-item",{attrs:{label:"工作地区",prop:"districtArr"}},[r("el-cascader",{ref:"intDistrict",attrs:{placeholder:"请选择期望地区",options:t.columnsCitycategory,props:{checkStrictly:!0},filterable:""},model:{value:t.form.districtArr,callback:function(r){t.$set(t.form,"districtArr",r)},expression:"form.districtArr"}})],1),r("el-form-item",{attrs:{label:"最低薪资",prop:"minwage"}},[r("el-select",{staticClass:"w118",attrs:{placeholder:"请选择"},on:{change:t.handlerMinwageChange},model:{value:t.form.minwage,callback:function(r){t.$set(t.form,"minwage",r)},expression:"form.minwage"}},t._l(t.columnsMinWage,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"最高薪资",prop:"maxwage"}},[r("el-select",{staticClass:"w118",attrs:{placeholder:"请选择"},model:{value:t.form.maxwage,callback:function(r){t.$set(t.form,"maxwage",r)},expression:"form.maxwage"}},t._l(t.options_maxwage,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")]),!0===t.hasInfo?r("el-button",{on:{click:t.onCancel}},[t._v("取消订阅")]):t._e()],1)],1)],1)},s=[],i=(e("14d9"),e("751a")),o=e("d722"),c={data(){return{form:{categoryArr:[],districtArr:[],minwage:"",maxwage:""},optionCategory:[],optionDistrict:[],options_maxwage:[],hasInfo:!1,rules:{categoryArr:[{required:!0,message:"请选择期望职位",trigger:"change"}],districtArr:[{required:!0,message:"请选择期望地区",trigger:"change"}],minwage:[{required:!0,message:"请选择最低薪资",trigger:"change"}],maxwage:[{required:!0,message:"请选择最高薪资",trigger:"change"}]}}},created(){this.fetchData()},computed:{columnsCitycategory(){return this.$store.state.classifyCityCategory},columnsJobcategory(){return this.$store.state.classifyJobCategory},columnsMinWage(){let t=[],r=[...this.$store.state.classifyWage];r.length>0&&r.pop();for(let e=0;e<r.length;e++){let a={id:r[e],name:r[e]+"元/月"};t.push(a)}return t}},mounted(){this.$store.dispatch("getClassify","jobcategory"),this.$store.dispatch("getClassify","citycategory"),this.$store.dispatch("getClassifyWage")},methods:{fetchData(){i["a"].get(o["a"].personal_subscribe_job).then(t=>{null!==t.data&&(this.hasInfo=!0,this.form.minwage=t.data.minwage>0?t.data.minwage:"",this.form.maxwage=t.data.maxwage>0?t.data.maxwage:"",""!=this.form.minwage&&this.handlerMinwageChange(this.form.minwage),t.data.category1=t.data.category1>0?t.data.category1:0,t.data.category2=t.data.category2>0?t.data.category2:0,t.data.category3=t.data.category3>0?t.data.category3:0,t.data.category1>0&&(this.form.categoryArr.push(t.data.category1),t.data.category2>0&&(this.form.categoryArr.push(t.data.category2),t.data.category3>0&&this.form.categoryArr.push(t.data.category3))),t.data.district1>0&&(this.form.districtArr.push(t.data.district1),t.data.district2>0&&(this.form.districtArr.push(t.data.district2),t.data.district3>0&&this.form.districtArr.push(t.data.district3))))})},handlerMinwageChange(t){this.handleMaxwageChange(t)},handleMaxwageChange(t){let r=this.$store.state.classifyWage;if(!t)return!1;this.options_maxwage=[];let e=r.indexOf(t)+1;t>=this.form.maxwage&&(this.form.maxwage=r[e]);for(let a=e;a<r.length;a++){let t={id:r[a],name:r[a]+"元/月"};this.options_maxwage.push(t)}},onSubmit(){let t={category1:0,category2:0,category3:0,district1:0,district2:0,district3:0,minwage:this.form.minwage,maxwage:this.form.maxwage};3===this.form.categoryArr.length?(t.category1=this.form.categoryArr[0],t.category2=this.form.categoryArr[1],t.category3=this.form.categoryArr[2]):2===this.form.categoryArr.length?(t.category1=this.form.categoryArr[0],t.category2=this.form.categoryArr[1]):1===this.form.categoryArr.length&&(t.category1=this.form.categoryArr[0]),3===this.form.districtArr.length?(t.district1=this.form.districtArr[0],t.district2=this.form.districtArr[1],t.district3=this.form.districtArr[2]):2===this.form.districtArr.length?(t.district1=this.form.districtArr[0],t.district2=this.form.districtArr[1]):1===this.form.districtArr.length&&(t.district1=this.form.districtArr[0]),this.$refs.form.validate(r=>{if(!r)return!1;i["a"].post(o["a"].personal_subscribe_job_save,t).then(t=>{this.$message({type:"success",message:t.message}),this.hasInfo=!0})})},onCancel(){i["a"].post(o["a"].personal_subscribe_job_cancel).then(t=>{this.$message({type:"success",message:t.message}),this.hasInfo=!1,this.$refs.form.resetFields()})}}},g=c,n=(e("7fc7"),e("2877")),l=Object(n["a"])(g,a,s,!1,null,"a7dcc2e4",null);r["default"]=l.exports}}]);