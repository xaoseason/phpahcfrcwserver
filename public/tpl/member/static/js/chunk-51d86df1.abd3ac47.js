(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51d86df1"],{"0584":function(t,e,s){},"4a44":function(t,e,s){"use strict";s("0584")},"63b1":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("el-card",[e("company-title",[t._v(" 企业风采 "),e("div",{staticClass:"wxCode"},[t._v(" 手机传图更方便，使用微信扫码上传 "),e("div",{staticClass:"codeImg"},[e("span",{staticClass:"triangle"}),e("img",{attrs:{src:t.scanQrcode}}),e("p",[t._v("微信扫描二维码"),e("br"),t._v(" 快速上传手机相册图片 ")])])])]),e("el-alert",{attrs:{title:"最多可上传6张企业风采图片",type:"warning",closable:!1,"show-icon":""}}),e("div",{staticClass:"imgList_warpper"},[t._l(t.imgList,(function(s,a){return e("div",{key:a,staticClass:"img-item"},[e("el-image",{staticStyle:{width:"148px",height:"148px"},attrs:{src:s.img_src,"preview-src-list":t.srcList}}),e("div",{staticClass:"removeIcon",on:{click:function(e){return t.handleRemove(s,e)}}}),1!==parseInt(s.audit)?e("div",{staticClass:"img-mask"},[t._v(t._s(s.audit_text?s.audit_text:"待审核"))]):t._e()],1)})),e("el-upload",{staticClass:"imgList img_up_ico",attrs:{"show-file-list":!1,action:"#","list-type":"picture-card","http-request":t.handlerUpload,"on-exceed":t.handlerMax}},[e("i",{staticClass:"el-icon-plus"}),e("p",[t._v("上传风采")])]),e("div",{staticClass:"clear"})],2)],1)},i=[],c=s("751a"),r=s("d722"),o={data(){return{imgList:[],srcList:[],timer:"",scanQrcode:""}},created(){clearInterval(this.timer),this.fetchData();let t=this.$store.state.config.mobile_domain+"scan_upload?type=company_img&access="+this.$store.state.userToken;t=encodeURIComponent(t),this.scanQrcode=window.global.RequestBaseUrl+r["a"].get_qrcode+"?type=normal&url="+t},mounted(){this.timer=setInterval(this.scanUploadResult,5e3)},beforeDestroy(){clearInterval(this.timer)},methods:{scanUploadResult(){c["a"].post(r["a"].scan_upload_result,{type:"company_img"}).then(t=>{0!=t.data&&this.fetchData()}).catch(()=>{})},fetchData(){c["a"].get(r["a"].company_profile,{}).then(t=>{const{img_list:e}={...t.data};this.imgList=e;for(let s=0;s<this.imgList.length;s++){const t=this.imgList[s];this.srcList[s]=t.img_src}}).catch(()=>{})},handlerUpload(t){let e=t.file,s=(e.type||"").split("/"),a=s[1],i=["png","jpg","jpeg","bmp","gif"];if(-1==i.indexOf(a))return this.$message.error("文件类型不支持"),!1;if(e.size>1024*this.$store.state.config.fileupload_size){let t=this.$store.state.config.fileupload_size/1024;return t=t.toFixed(1),this.$message.error("文件大小超出限制，最大"+t+"mb"),!1}c["a"].postFormData(r["a"].company_img_upload,{file:e}).then(t=>{200===parseInt(t.code)?(this.$message({type:"success",message:t.message}),this.fetchData()):this.$message.error(t.message)}).catch(t=>{console.log(t)})},handleRemove(t){this.$confirm("确定删除该风采照片吗","系统提示",{type:"warning"}).then(()=>{c["a"].post(r["a"].company_img_del,{id:t.id}).then(t=>{200===parseInt(t.code)?(this.$message({type:"success",message:t.message}),this.fetchData()):this.$message.error(t.message)}).catch(t=>{console.log(t)})}).catch(()=>{})},handlerMax(t,e){e.length>=6&&this.$message.error("最多可上传6张企业风采图片")}}},n=o,l=(s("4a44"),s("2877")),d=Object(l["a"])(n,a,i,!1,null,"146d5c09",null);e["default"]=d.exports}}]);