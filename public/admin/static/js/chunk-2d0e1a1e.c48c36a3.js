(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1a1e"],{"7aec":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"app-container"},[t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"参数配置",lazy:!0}},[t("mailbase")],1)],1)],1)},l=[],o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"app-container"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,"inline-message":!0}},[t("div",{staticClass:"spaceline"}),t("el-form-item",{attrs:{label:"默认发送方式"}},[t("el-radio-group",{model:{value:e.form.sendmail_type,callback:function(s){e.$set(e.form,"sendmail_type",s)},expression:"form.sendmail_type"}},[t("el-radio",{attrs:{label:"smtp"}},[e._v("SMTP")]),t("el-radio",{attrs:{label:"aliyundm"}},[e._v("阿里云邮件推送")]),t("el-radio",{attrs:{label:"sendcloud"}},[e._v("SendCloud")])],1)],1),"smtp"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"SMTP服务器"}},[t("el-input",{staticClass:"middle",model:{value:e.form.smtp.host,callback:function(s){e.$set(e.form.smtp,"host",s)},expression:"form.smtp.host"}})],1):e._e(),"smtp"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"SMTP端口"}},[t("el-input",{staticClass:"middle",model:{value:e.form.smtp.port,callback:function(s){e.$set(e.form.smtp,"port",s)},expression:"form.smtp.port"}})],1):e._e(),"smtp"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"SMTP用户名"}},[t("el-input",{staticClass:"middle",model:{value:e.form.smtp.username,callback:function(s){e.$set(e.form.smtp,"username",s)},expression:"form.smtp.username"}})],1):e._e(),"smtp"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"SMTP密码"}},[t("el-input",{staticClass:"middle",model:{value:e.form.smtp.password,callback:function(s){e.$set(e.form.smtp,"password",s)},expression:"form.smtp.password"}})],1):e._e(),"smtp"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"发送方地址"}},[t("el-input",{staticClass:"middle",model:{value:e.form.smtp.sender_address,callback:function(s){e.$set(e.form.smtp,"sender_address",s)},expression:"form.smtp.sender_address"}})],1):e._e(),"aliyundm"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"AccessKey"}},[t("el-input",{staticClass:"middle",model:{value:e.form.aliyundm.access_key,callback:function(s){e.$set(e.form.aliyundm,"access_key",s)},expression:"form.aliyundm.access_key"}})],1):e._e(),"aliyundm"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"AccessSecret"}},[t("el-input",{staticClass:"middle",model:{value:e.form.aliyundm.access_secret,callback:function(s){e.$set(e.form.aliyundm,"access_secret",s)},expression:"form.aliyundm.access_secret"}})],1):e._e(),"aliyundm"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"发送方地址"}},[t("el-input",{staticClass:"middle",model:{value:e.form.aliyundm.sender_address,callback:function(s){e.$set(e.form.aliyundm,"sender_address",s)},expression:"form.aliyundm.sender_address"}})],1):e._e(),"sendcloud"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{staticClass:"middle",model:{value:e.form.sendcloud.api_user,callback:function(s){e.$set(e.form.sendcloud,"api_user",s)},expression:"form.sendcloud.api_user"}})],1):e._e(),"sendcloud"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"Key"}},[t("el-input",{staticClass:"middle",model:{value:e.form.sendcloud.api_key,callback:function(s){e.$set(e.form.sendcloud,"api_key",s)},expression:"form.sendcloud.api_key"}})],1):e._e(),"sendcloud"==e.form.sendmail_type?t("el-form-item",{attrs:{label:"发送方地址"}},[t("el-input",{staticClass:"middle",model:{value:e.form.sendcloud.sender_address,callback:function(s){e.$set(e.form.sendcloud,"sender_address",s)},expression:"form.sendcloud.sender_address"}})],1):e._e(),t("el-form-item",{attrs:{label:""}},[t("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.onSubmit("form")}}},[e._v("保存")]),t("el-button",{on:{click:function(s){return e.onTestDialog()}}},[e._v("测试")])],1)],1),e.dialogFormVisible?t("el-dialog",{attrs:{title:"发送测试邮件",visible:e.dialogFormVisible,width:"35%","close-on-click-modal":!1},on:{"update:visible":function(s){e.dialogFormVisible=s},close:e.closeDialog}},[t("el-form",{ref:"testform",staticClass:"common-form",attrs:{model:e.testform,"label-width":"150px",rules:e.testrules,"inline-message":!0}},[t("el-form-item",{attrs:{label:"接收邮箱",prop:"email"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.testform.email,callback:function(s){e.$set(e.testform,"email",s)},expression:"testform.email"}})],1),t("el-form-item",{attrs:{label:" "}},[t("el-button",{attrs:{type:"primary",loading:e.testLoading},on:{click:function(s){return e.onTest("testform")}}},[e._v(" 发送测试邮件 ")]),t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1):e._e()],1)},i=[],n=t("ade3"),r=t("5530"),m=t("1063"),d={data:function(){return{infoLoading:!0,testLoading:!1,dialogFormVisible:!1,testform:{email:""},form:{sendmail_type:"smtp",smtp:{host:"",port:"",username:"",password:"",sender_address:""},sendcloud:{api_user:"",api_key:"",sender_address:""},aliyundm:{access_key:"",access_secret:"",sender_address:""}},rules:{},testrules:{email:[{required:!0,message:"请输入接收邮箱",trigger:"blur"}]}}},mounted:function(){},created:function(){this.fetchInfo()},methods:{fetchInfo:function(){var e=this;this.infoLoading=!0;var s={};Object(m["j"])(s,"get").then((function(s){var t=s.data,a=t.sendmail_type,l=t.account_smtp,o=t.account_sendcloud,i=t.account_aliyundm;e.form.sendmail_type=a,e.form.smtp=l,e.form.sendcloud=o,e.form.aliyundm=i,e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var s=this,t=this,a=Object(n["a"])({sendmail_type:t.form.sendmail_type},"account_"+t.form.sendmail_type,Object(r["a"])({},t.form[t.form.sendmail_type]));this.$refs[e].validate((function(e){if(!e)return!1;Object(m["j"])(a).then((function(e){return s.$store.dispatch("config/getConfigInfo"),s.$message.success(e.message),!0})).catch((function(){}))}))},onTestDialog:function(){this.testLoading=!1,this.dialogFormVisible=!0},closeDialog:function(){this.testLoading=!1,this.dialogFormVisible=!1},onTest:function(e){var s=this,t={email:s.testform.email,type:s.form.sendmail_type,account:Object(r["a"])({},s.form[s.form.sendmail_type])};s.$refs[e].validate((function(e){if(!e)return!1;s.testLoading=!0,Object(m["h"])(t).then((function(e){return s.dialogFormVisible=!1,s.$message.success(e.message),!0})).catch((function(e){s.testLoading=!1}))}))}}},c=d,u=t("2877"),f=Object(u["a"])(c,o,i,!1,null,null,null),p=f.exports,_={components:{mailbase:p}},b=_,y=Object(u["a"])(b,a,l,!1,null,null,null);s["default"]=y.exports}}]);