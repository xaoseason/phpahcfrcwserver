(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63168ee2"],{"17ea":function(t,e,a){t.exports=a.p+"static/img/5.99bf6490.jpg"},2017:function(t,e,a){"use strict";var o=a("cafe"),s=a.n(o);s.a},"55cf":function(t,e,a){t.exports=a.p+"static/img/2.3d4f6d41.jpg"},"6ba6":function(t,e,a){var o={"./1.jpg":"ceb6","./2.jpg":"55cf","./3.jpg":"bcb2","./4.jpg":"a94a","./5.jpg":"17ea"};function s(t){var e=n(t);return a(e)}function n(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}s.keys=function(){return Object.keys(o)},s.resolve=n,t.exports=s,s.id="6ba6"},"9ed6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container",style:t.serviceBg},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"auto-complete":"on","label-position":"left"}},[a("div",{staticClass:"title-container"},[a("div",{staticClass:"t_wel"},[t._v("欢迎登录")]),a("div",{staticClass:"t_site"},[t._v(t._s(t.$store.state.config.sitename)+"管理中心")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isTabLogin,expression:"isTabLogin"}]},[a("el-form-item",{attrs:{prop:"username"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"user"}})],1),a("el-input",{ref:"username",attrs:{placeholder:"请输入用户名",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"password"}})],1),a("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),a("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[a("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1),a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{staticStyle:{float:"left",width:"58%"},attrs:{placeholder:"请输入验证码",name:"code","auto-complete":"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}}),a("img",{staticClass:"cap_img",attrs:{src:t.captchaSrc,alt:"点击刷新"},on:{click:t.refreshCaptcha}})],1),a("el-button",{attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v(" 立即登录 ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isTabLogin,expression:"!isTabLogin"}],staticClass:"code_login"},[a("div",{staticClass:"code_img"},[""!=t.qrcode?a("img",{attrs:{src:t.qrcode}}):t._e()]),t.qrcodefaild?t._e():a("p",{staticClass:"tips_text"},[t._v(" 请使用"),a("span",{staticClass:"wx_text"},[t._v("微信扫描")]),t._v("二维码登录 ")]),t.qrcodefaild?a("p",{staticClass:"tips_text",staticStyle:{color:"#F56C6C"}},[t._v(" 系统未配置微信,暂不支持微信扫码登录 "),a("br"),t._v(" 请联系超级管理员完成微信必要配置并绑定管理员帐号 ")]):t._e()])]),a("div",{staticClass:"login_copyright"},[t._v(t._s(t.$store.state.config.bottom_other))])],1)},s=[],n=a("c24f");function i(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=e.length,o="",s=0;s<t;s++)o+=e.charAt(Math.floor(Math.random()*a));return o}var r={name:"Login",data:function(){var t=function(t,e,a){e.length<1?a(new Error("请输入密码")):a()};return{captchaSrc:"",qrcodefaild:!1,loginForm:{username:"",password:"",code:"",secret_str:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",validator:t}],code:[{required:!0,trigger:"blur",message:"请输入验证码"}]},loading:!1,passwordType:"password",redirect:void 0,serviceBg:{backgroundImage:"url("+a("6ba6")("./"+this.getRandomInt(1,5)+".jpg")+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundPosition:"center center"},mobileUrl:"",isTabLogin:!0,qrcode:"",scan_token:"",timer:""}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},created:function(){this.refreshCaptcha(),this.mobileUrl=this.$store.state.config.sitedomain+this.$store.state.config.sitedir+"adminm"},beforeDestroy:function(){clearInterval(this.timer)},methods:{getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},refreshCaptcha:function(){var t=this;Object(n["a"])().then((function(e){t.loginForm.secret_str=e.data.secret_str,t.captchaSrc=e.data.src,t.loginForm.code=e.data.code})).catch((function(){}))},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.$store.dispatch("user/login",t.loginForm).then((function(){t.$router.push({path:"/"}),t.loading=!1})).catch((function(){t.refreshCaptcha(),t.loading=!1}))}))},changeTabLogin:function(){var t=this;this.isTabLogin=!this.isTabLogin,this.isTabLogin?clearInterval(this.timer):(this.loading=!0,this.scan_token=i(),Object(n["d"])({scan_token:this.scan_token}).then((function(e){t.loading=!1,e.data?(t.qrcode=e.data,t.timer=setInterval(t.funScan,5e3)):t.qrcodefaild=!0})).catch((function(){})))},funScan:function(){var t=this;this.$store.dispatch("user/scan",this.scan_token).then((function(){t.$router.push({path:t.redirect||"/"})})).catch((function(){}))}}},c=r,l=(a("2017"),a("e389"),a("2877")),d=Object(l["a"])(c,o,s,!1,null,"41477139",null);e["default"]=d.exports},a94a:function(t,e,a){t.exports=a.p+"static/img/4.bc5c9a4c.jpg"},bcb2:function(t,e,a){t.exports=a.p+"static/img/3.46ce6a13.jpg"},c614:function(t,e,a){},cafe:function(t,e,a){},ceb6:function(t,e,a){t.exports=a.p+"static/img/1.8fe91190.jpg"},e389:function(t,e,a){"use strict";var o=a("c614"),s=a.n(o);s.a}}]);