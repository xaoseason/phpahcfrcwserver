(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a653f39c"],{"1b1b":function(e,t,i){"use strict";var a=i("bbd1"),o=i.n(a);o.a},4990:function(e,t,i){},"6d94":function(e,t,i){"use strict";var a=i("9301"),o=i.n(a);o.a},9301:function(e,t,i){},a47c:function(e,t,i){"use strict";var a=i("f2be"),o=i.n(a);o.a},a78e1:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"网站配置",lazy:!0}},[i("sysconfigwebsite")],1),i("el-tab-pane",{attrs:{label:"注册设置",lazy:!0}},[i("sysconfigreg")],1),i("el-tab-pane",{attrs:{label:"电子地图",lazy:!0}},[i("sysconfigmap")],1),i("el-tab-pane",{attrs:{label:"文件上传",lazy:!0}},[i("sysconfigupload")],1),i("el-tab-pane",{attrs:{label:"底部引导条",lazy:!0}},[i("sysconfigguide")],1)],1)],1)},o=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"spaceline"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"200px",rules:e.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"网站名称",prop:"sitename"}},[i("el-input",{staticClass:"middle",model:{value:e.form.sitename,callback:function(t){e.$set(e.form,"sitename",t)},expression:"form.sitename"}})],1),i("el-form-item",{attrs:{label:"网站域名",prop:"sitedomain"}},[i("el-input",{staticClass:"middle",model:{value:e.form.sitedomain,callback:function(t){e.$set(e.form,"sitedomain",t)},expression:"form.sitedomain"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 结尾不要加“/” ")])],1),i("el-form-item",{attrs:{label:"安装目录",prop:"sitedir"}},[i("el-input",{staticClass:"middle",model:{value:e.form.sitedir,callback:function(t){e.$set(e.form,"sitedir",t)},expression:"form.sitedir"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 以“/”开头和结尾, 如果安装在根目录，则为“/” ")])],1),i("el-form-item",{attrs:{label:"web端会员中心目录名称",prop:"member_dirname"}},[i("el-input",{staticClass:"middle",model:{value:e.form.member_dirname,callback:function(t){e.$set(e.form,"member_dirname",t)},expression:"form.member_dirname"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 只填写目录名称，不要加“/” ")])],1),i("el-form-item",{attrs:{label:"联系电话",prop:"contact_tel"}},[i("el-input",{staticClass:"middle",model:{value:e.form.contact_tel,callback:function(t){e.$set(e.form,"contact_tel",t)},expression:"form.contact_tel"}})],1),i("el-form-item",{attrs:{label:"联系邮箱",prop:"contact_email"}},[i("el-input",{staticClass:"middle",model:{value:e.form.contact_email,callback:function(t){e.$set(e.form,"contact_email",t)},expression:"form.contact_email"}})],1),i("el-form-item",{attrs:{label:"联系地址",prop:"contact_address"}},[i("el-input",{staticClass:"middle",model:{value:e.form.contact_address,callback:function(t){e.$set(e.form,"contact_address",t)},expression:"form.contact_address"}})],1),i("el-form-item",{attrs:{label:"服务时间",prop:"service_time"}},[i("el-input",{staticClass:"middle",model:{value:e.form.service_time,callback:function(t){e.$set(e.form,"service_time",t)},expression:"form.service_time"}})],1),i("el-form-item",{attrs:{label:"客服qq",prop:"service_qq"}},[i("el-input",{staticClass:"middle",model:{value:e.form.service_qq,callback:function(t){e.$set(e.form,"service_qq",t)},expression:"form.service_qq"}})],1),i("el-form-item",{attrs:{label:"申请友链qq",prop:"flink_qq"}},[i("el-input",{staticClass:"middle",model:{value:e.form.flink_qq,callback:function(t){e.$set(e.form,"flink_qq",t)},expression:"form.flink_qq"}})],1),i("el-form-item",{attrs:{label:"其他说明",prop:"bottom_other"}},[i("el-input",{staticClass:"middle",model:{value:e.form.bottom_other,callback:function(t){e.$set(e.form,"bottom_other",t)},expression:"form.bottom_other"}})],1),i("el-form-item",{attrs:{label:"网站备案号(ICP)",prop:"icp"}},[i("el-input",{staticClass:"middle",model:{value:e.form.icp,callback:function(t){e.$set(e.form,"icp",t)},expression:"form.icp"}})],1),i("el-form-item",{attrs:{label:"公网安备",prop:"network_security"}},[i("el-input",{staticClass:"middle",model:{value:e.form.network_security,callback:function(t){e.$set(e.form,"network_security",t)},expression:"form.network_security"}})],1),i("el-form-item",{attrs:{label:"人力资源服务许可证",prop:"service_license"}},[i("el-input",{staticClass:"middle",model:{value:e.form.service_license,callback:function(t){e.$set(e.form,"service_license",t)},expression:"form.service_license"}})],1),i("el-form-item",{attrs:{label:"暂时关闭网站"}},[i("el-switch",{model:{value:e.form.isclose,callback:function(t){e.$set(e.form,"isclose",t)},expression:"form.isclose"}})],1),i("el-form-item",{attrs:{label:"关闭网站原因"}},[i("el-input",{staticClass:"middle",model:{value:e.form.close_reason,callback:function(t){e.$set(e.form,"close_reason",t)},expression:"form.close_reason"}})],1),i("el-form-item",{attrs:{label:"第三方统计代码",prop:"statistics"}},[i("el-input",{staticClass:"middle",attrs:{type:"textarea",rows:4},model:{value:e.form.statistics,callback:function(t){e.$set(e.form,"statistics",t)},expression:"form.statistics"}})],1),i("el-form-item",{attrs:{label:"网站logo",prop:"logo"}},[i("el-upload",{staticClass:"logo-uploader",attrs:{action:e.apiUpload,headers:e.headers,"show-file-list":!1,"on-success":e.handleLogoSuccess,"before-upload":e.beforeLogoUpload}},[e.logoUrl?i("img",{staticClass:"logo",attrs:{src:e.logoUrl}}):i("i",{staticClass:"el-icon-plus logo-uploader-icon"})]),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 建议尺寸170*70 ")])],1),i("el-form-item",{attrs:{label:"网站方形logo",prop:"square_logo"}},[i("el-upload",{staticClass:"squarelogo-uploader",attrs:{action:e.apiUpload,headers:e.headers,"show-file-list":!1,"on-success":e.handleSquareLogoSuccess,"before-upload":e.beforeLogoUpload}},[e.squarelogoUrl?i("img",{staticClass:"squarelogo",attrs:{src:e.squarelogoUrl}}):i("i",{staticClass:"el-icon-plus squarelogo-uploader-icon"})]),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 建议尺寸200*200 ")])],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(" 保存 ")])],1)],1)],1)},r=[],l=(i("caad"),i("d3b7"),i("ac1f"),i("8a79"),i("2532"),i("3ca3"),i("1276"),i("2ca0"),i("ddb0"),i("2b3d"),i("5530")),n=i("1063"),c=i("d722"),m=i("5f87"),f={data:function(){var e=function(e,t,i){t.endsWith("/")?i(new Error("域名结尾不要加“/”")):i()},t=function(e,t,i){t.startsWith("/")?t.endsWith("/")?i():i(new Error("安装目录要以“/”结束")):i(new Error("安装目录要以“/”开始"))};return{infoLoading:!0,headers:{admintoken:Object(m["e"])()},fileupload_size:"",fileupload_ext:"",apiUpload:window.global.RequestBaseUrl+c["a"].upload,form:{sitename:"",sitedomain:"",sitedir:"",member_dirname:"",contact_tel:"",contact_email:"",contact_address:"",service_time:"",service_qq:"",bottom_other:"",icp:"",network_security:"",service_license:"",flink_qq:"",isclose:!1,close_reason:"",statistics:"",logo:"",square_logo:""},logoUrl:"",squarelogoUrl:"",rules:{sitename:[{required:!0,message:"请输入网站名称",trigger:"blur"},{max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],sitedomain:[{required:!0,message:"请输入网站域名",trigger:"blur"},{max:100,message:"长度在 1 到 100 个字符",trigger:"blur"},{validator:e,trigger:"blur"}],sitedir:[{required:!0,message:"请输入安装目录",trigger:"blur"},{validator:t,trigger:"blur"}]}}},computed:{config:function(){return this.$store.state.config}},mounted:function(){},created:function(){this.fileupload_size=this.config.fileupload_size,this.fileupload_ext=this.config.fileupload_ext,this.fetchInfo()},methods:{fetchInfo:function(){var e=this;this.infoLoading=!0;var t={};Object(n["j"])(t,"get").then((function(t){var i=Object(l["a"])({},t.data),a=i.sitename,o=i.sitedomain,s=i.sitedir,r=i.member_dirname,n=i.contact_tel,c=i.contact_email,m=i.contact_address,f=i.service_time,u=i.service_qq,d=i.bottom_other,p=i.icp,_=i.network_security,g=i.service_license,b=i.flink_qq,h=i.isclose,v=i.close_reason,q=i.statistics,k=i.logo,C=i.square_logo;e.form={sitename:a,sitedomain:o,sitedir:s,member_dirname:r,contact_tel:n,contact_email:c,contact_address:m,service_time:f,service_qq:u,bottom_other:d,icp:p,network_security:_,service_license:g,flink_qq:b,isclose:h,close_reason:v,statistics:q,logo:k,square_logo:C},e.form.isclose=1==e.form.isclose,e.logoUrl=t.data.logoUrl,e.squarelogoUrl=t.data.squarelogoUrl,e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this,i=Object(l["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return!1;i.isclose=!0===i.isclose?1:0,Object(n["j"])(i).then((function(e){return t.$store.dispatch("config/getConfigInfo"),t.$message.success(e.message),!0})).catch((function(){}))}))},handleLogoSuccess:function(e,t){if(200!==e.code)return this.$message.error(e.message),!1;this.logoUrl=URL.createObjectURL(t.raw),this.form.logo=e.data.file_id},handleSquareLogoSuccess:function(e,t){if(200!==e.code)return this.$message.error(e.message),!1;this.squarelogoUrl=URL.createObjectURL(t.raw),this.form.square_logo=e.data.file_id},beforeLogoUpload:function(e){var t=e.type.split("/"),i=t[1],a=this.fileupload_ext.split(",");return a.includes(i)?!(e.size/1024>this.fileupload_size)||(this.$message.error("上传文件最大为".concat(this.fileupload_size,"kb")),!1):(this.$message.error("上传文件格式不允许"),!1)}}},u=f,d=(i("6d94"),i("2877")),p=Object(d["a"])(u,s,r,!1,null,"7f4fb26e",null),_=p.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"spaceline"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"关闭会员注册"}},[i("el-switch",{model:{value:e.form.closereg,callback:function(t){e.$set(e.form,"closereg",t)},expression:"form.closereg"}})],1),i("el-form-item",{attrs:{label:"用户名前缀"}},[i("el-input",{staticClass:"small",model:{value:e.form.reg_prefix,callback:function(t){e.$set(e.form,"reg_prefix",t)},expression:"form.reg_prefix"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 注册生成用户名，规则：前缀+手机号末4位+随机码，如:user_5353753951 ")])],1),i("el-form-item",{attrs:{label:"注册协议"}},[i("div",{staticClass:"editor",attrs:{id:"editor_agreement"}})]),i("el-form-item",{attrs:{label:"隐私政策"}},[i("div",{staticClass:"editor",attrs:{id:"editor_privacy"}})]),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")])],1)],1)],1)},b=[],h=i("6fad"),v=i.n(h),q={data:function(){return{infoLoading:!0,editor_agreement:"",editor_privacy:"",form:{closereg:"",reg_prefix:"",agreement:"",privacy:""},rules:{}}},mounted:function(){this.editor_agreement=new v.a("#editor_agreement"),this.editor_agreement.config.uploadImgShowBase64=!0,this.editor_agreement.config.zIndex=1,this.editor_agreement.config.pasteFilterStyle=!1,this.editor_agreement.create(),this.editor_privacy=new v.a("#editor_privacy"),this.editor_privacy.config.uploadImgShowBase64=!0,this.editor_privacy.config.zIndex=1,this.editor_privacy.config.pasteFilterStyle=!1,this.editor_privacy.create()},created:function(){this.fetchInfo()},methods:{fetchInfo:function(){var e=this;this.infoLoading=!0;var t={};Object(n["j"])(t,"get").then((function(t){var i=Object(l["a"])({},t.data),a=i.closereg,o=i.reg_prefix,s=i.agreement,r=i.privacy;e.form={closereg:a,reg_prefix:o,agreement:s,privacy:r},e.form.closereg=1==e.form.closereg,e.editor_agreement.txt.html(e.form.agreement),e.editor_privacy.txt.html(e.form.privacy),e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this;this.form.agreement=this.editor_agreement.txt.html(),this.form.privacy=this.editor_privacy.txt.html();var i=Object(l["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return!1;i.closereg=!0===i.closereg?1:0,Object(n["j"])(i).then((function(e){return t.$store.dispatch("config/getConfigInfo"),t.$message.success(e.message),!0})).catch((function(){}))}))}}},k=q,C=Object(d["a"])(k,g,b,!1,null,null,null),x=C.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"spaceline"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"150px",rules:e.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"默认地图标注"}},[i("baidu-map",{staticClass:"map",attrs:{ak:e.config.map_ak,"scroll-wheel-zoom":!0,center:e.center,zoom:e.zoom},on:{ready:e.handlerMap,moveend:e.handlerMapMove,zoomend:e.handlerMapScroll}},[i("baidu-map-navigation")],1)],1),i("el-form-item",{attrs:{label:"百度地图客户端AK"}},[i("el-input",{staticClass:"small",model:{value:e.form.map_ak,callback:function(t){e.$set(e.form,"map_ak",t)},expression:"form.map_ak"}})],1),i("el-form-item",{attrs:{label:"百度地图服务端AK"}},[i("el-input",{staticClass:"small",model:{value:e.form.map_server_ak,callback:function(t){e.$set(e.form,"map_server_ak",t)},expression:"form.map_server_ak"}})],1),i("el-form-item",{attrs:{label:"默认中心点X坐标"}},[i("el-input",{staticClass:"small",model:{value:e.form.map_lng,callback:function(t){e.$set(e.form,"map_lng",t)},expression:"form.map_lng"}})],1),i("el-form-item",{attrs:{label:"默认中心点Y坐标"}},[i("el-input",{staticClass:"small",model:{value:e.form.map_lat,callback:function(t){e.$set(e.form,"map_lat",t)},expression:"form.map_lat"}})],1),i("el-form-item",{attrs:{label:"默认缩放级别"}},[i("el-input",{staticClass:"small",model:{value:e.form.map_zoom,callback:function(t){e.$set(e.form,"map_zoom",t)},expression:"form.map_zoom"}})],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")])],1)],1)],1)},$=[],w=(i("d81d"),i("df2b")),z=i("6f5b"),j={components:{BaiduMap:w["a"],BaiduMapNavigation:z["a"]},data:function(){return{infoLoading:!0,center:{lng:116.404,lat:39.915},zoom:12,form:{map_ak:"",map_server_ak:"",map_lng:"",map_lat:"",map_zoom:""},rules:{}}},computed:{config:function(){return this.$store.state.config}},mounted:function(){},created:function(){this.fetchInfo()},methods:{handlerMap:function(e){e.BMap,e.map;var t=this;setTimeout((function(){t.center.lng=t.config.map_lng,t.center.lat=t.config.map_lat,t.zoom=parseInt(t.config.map_zoom)}),1e3)},handlerMapMove:function(e){var t=e.target.getCenter(),i=t.lng,a=t.lat;this.form.map_lng=i,this.form.map_lat=a,this.form.map_zoom=e.target.getZoom()},handlerMapScroll:function(e){this.form.map_zoom=e.target.getZoom()},fetchInfo:function(){var e=this;this.infoLoading=!0;var t={};Object(n["j"])(t,"get").then((function(t){var i=Object(l["a"])({},t.data),a=i.map_ak,o=i.map_server_ak,s=i.map_lng,r=i.map_lat,n=i.map_zoom;e.form={map_ak:a,map_server_ak:o,map_lng:s,map_lat:r,map_zoom:n},e.form.map_zoom=parseInt(e.form.map_zoom),e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this,i=Object(l["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return!1;Object(n["j"])(i).then((function(e){return t.$store.dispatch("config/getConfigInfo"),t.$message.success(e.message),!0})).catch((function(){}))}))}}},L=j,U=(i("1b1b"),Object(d["a"])(L,y,$,!1,null,null,null)),O=U.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"spaceline"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"150px",rules:e.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"文件保存位置"}},[i("el-radio-group",{model:{value:e.form.fileupload_type,callback:function(t){e.$set(e.form,"fileupload_type",t)},expression:"form.fileupload_type"}},[i("el-radio",{attrs:{label:"default"}},[e._v("本地服务器")]),i("el-radio",{attrs:{label:"qiniu"}},[e._v("七牛云")])],1)],1),"qiniu"==e.form.fileupload_type?i("el-form-item",{staticClass:"is-required",attrs:{label:"存储空间名",prop:"bucket"}},[i("el-input",{model:{value:e.form.account_qiniu.bucket,callback:function(t){e.$set(e.form.account_qiniu,"bucket",t)},expression:"form.account_qiniu.bucket"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 创建空间时设置的名称 ")])],1):e._e(),"qiniu"==e.form.fileupload_type?i("el-form-item",{staticClass:"is-required",attrs:{label:"accessKey",prop:"access_key"}},[i("el-input",{model:{value:e.form.account_qiniu.access_key,callback:function(t){e.$set(e.form.account_qiniu,"access_key",t)},expression:"form.account_qiniu.access_key"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 在七牛云管理平台【个人面板-密钥管理】获取 ")])],1):e._e(),"qiniu"==e.form.fileupload_type?i("el-form-item",{staticClass:"is-required",attrs:{label:"secretKey",prop:"secret_key"}},[i("el-input",{model:{value:e.form.account_qiniu.secret_key,callback:function(t){e.$set(e.form.account_qiniu,"secret_key",t)},expression:"form.account_qiniu.secret_key"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 在七牛云管理平台【个人面板-密钥管理】获取 ")])],1):e._e(),"qiniu"==e.form.fileupload_type?i("el-form-item",{staticClass:"is-required",attrs:{label:"外链域名",prop:"domain"}},[i("el-input",{model:{value:e.form.account_qiniu.domain,callback:function(t){e.$set(e.form.account_qiniu,"domain",t)},expression:"form.account_qiniu.domain"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 资源访问域名，请到七牛云管理平台设置 ")])],1):e._e(),"qiniu"==e.form.fileupload_type?i("el-form-item",{staticClass:"is-required",attrs:{label:"资源访问协议",prop:"protocol"}},[i("el-radio-group",{model:{value:e.form.account_qiniu.protocol,callback:function(t){e.$set(e.form.account_qiniu,"protocol",t)},expression:"form.account_qiniu.protocol"}},[i("el-radio",{attrs:{label:"http://"}},[e._v("http://")]),i("el-radio",{attrs:{label:"https://"}},[e._v("https://")])],1),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 资源访问协议http(s)，请到七牛云管理平台设置 ")])],1):e._e(),i("el-form-item",{attrs:{label:"文件上传最大限制",prop:"fileupload_size"}},[i("el-input",{attrs:{type:"number"},model:{value:e.form.fileupload_size,callback:function(t){e.$set(e.form,"fileupload_size",e._n(t))},expression:"form.fileupload_size"}},[i("template",{slot:"append"},[e._v("kb")])],2)],1),i("el-form-item",{attrs:{label:"允许上传的文件类型",prop:"fileupload_ext"}},[i("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.fileupload_ext,callback:function(t){e.$set(e.form,"fileupload_ext",t)},expression:"form.fileupload_ext"}}),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 多个以英文半角逗号 “,” 隔开 ")])],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")])],1)],1)],1)},I=[],M={data:function(){return{infoLoading:!0,form:{fileupload_type:"",fileupload_size:0,fileupload_ext:"",account_qiniu:{bucket:"",access_key:"",secret_key:"",domain:"",protocol:""}},rules:{fileupload_size:[{required:!0,message:"请输入文件上传最大限制",trigger:"blur"},{type:"number",message:"输入内容必须为数字",trigger:"blur"}],fileupload_ext:[{required:!0,message:"请输入允许上传的文件类型",trigger:"blur"}]}}},computed:{config:function(){return this.$store.state.config}},mounted:function(){},created:function(){this.fetchInfo()},methods:{fetchInfo:function(){var e=this;this.infoLoading=!0;var t={};Object(n["j"])(t,"get").then((function(t){var i=t.data,a=i.fileupload_type,o=i.fileupload_size,s=i.fileupload_ext,r=i.account_qiniu;e.form.fileupload_type=""==a?"default":a,e.form.fileupload_size=parseInt(o),e.form.fileupload_ext=s,e.form.account_qiniu=r,e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this,i=Object(l["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return!1;Object(n["j"])(i).then((function(e){return t.$store.dispatch("config/getConfigInfo"),t.$message.success(e.message),!0})).catch((function(){}))}))}}},E=M,R=(i("c794"),Object(d["a"])(E,S,I,!1,null,"f67b39a4",null)),B=R.exports,N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"spaceline"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"标题",prop:"guide_title"}},[i("el-input",{staticClass:"middle",attrs:{maxlength:"16","show-word-limit":""},model:{value:e.form.guide_title,callback:function(t){e.$set(e.form,"guide_title",t)},expression:"form.guide_title"}})],1),i("el-form-item",{attrs:{label:"内容",prop:"guide_content"}},[i("el-input",{staticClass:"middle",attrs:{maxlength:"25","show-word-limit":""},model:{value:e.form.guide_content,callback:function(t){e.$set(e.form,"guide_content",t)},expression:"form.guide_content"}})],1),i("el-form-item",{attrs:{label:"是否开启"}},[i("el-switch",{model:{value:e.form.guide_open,callback:function(t){e.$set(e.form,"guide_open",t)},expression:"form.guide_open"}})],1),i("el-form-item",{attrs:{label:"二维码图片",prop:"guide_qrcode"}},[i("el-upload",{staticClass:"qrcode-uploader",attrs:{action:e.apiUpload,headers:e.headers,"show-file-list":!1,"on-success":e.handleQrcodeSuccess,"before-upload":e.beforeQrcodeUpload}},[e.qrcodeUrl?i("img",{staticClass:"qrcode",attrs:{src:e.qrcodeUrl}}):i("i",{staticClass:"el-icon-plus qrcode-uploader-icon"})]),i("span",{staticClass:"smalltip"},[i("i",{staticClass:"el-icon-info"}),e._v(" 建议尺寸94*94 ")])],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(" 保存 ")])],1)],1)],1)},K=[],Q={data:function(){return{infoLoading:!0,headers:{admintoken:Object(m["e"])()},fileupload_size:"",fileupload_ext:"",apiUpload:window.global.RequestBaseUrl+c["a"].upload,form:{guide_title:"",guide_content:"",guide_open:!1,guide_qrcode:""},qrcodeUrl:"",rules:{guide_title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],guide_content:[{required:!0,message:"请输入内容",trigger:"blur"},{max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}]}}},computed:{config:function(){return this.$store.state.config}},mounted:function(){},created:function(){this.fileupload_size=this.config.fileupload_size,this.fileupload_ext=this.config.fileupload_ext,this.fetchInfo()},methods:{fetchInfo:function(){var e=this;this.infoLoading=!0;var t={};Object(n["j"])(t,"get").then((function(t){var i=Object(l["a"])({},t.data),a=i.guide_title,o=i.guide_content,s=i.guide_open,r=i.guide_qrcode;e.form={guide_title:a,guide_content:o,guide_open:s,guide_qrcode:r},e.form.guide_open=1==e.form.guide_open,e.qrcodeUrl=t.data.guide_qrcodeUrl,e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this,i=Object(l["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return!1;i.guide_open=!0===i.guide_open?1:0,Object(n["j"])(i).then((function(e){return t.$store.dispatch("config/getConfigInfo"),t.$message.success(e.message),!0})).catch((function(){}))}))},handleQrcodeSuccess:function(e,t){if(200!==e.code)return this.$message.error(e.message),!1;this.qrcodeUrl=URL.createObjectURL(t.raw),this.form.guide_qrcode=e.data.file_id},beforeQrcodeUpload:function(e){var t=e.type.split("/"),i=t[1],a=this.fileupload_ext.split(",");return a.includes(i)?!(e.size/1024>this.fileupload_size)||(this.$message.error("上传文件最大为".concat(this.fileupload_size,"kb")),!1):(this.$message.error("上传文件格式不允许"),!1)}}},W=Q,A=(i("a47c"),Object(d["a"])(W,N,K,!1,null,"5830e133",null)),F=A.exports,J={components:{sysconfigwebsite:_,sysconfigreg:x,sysconfigmap:O,sysconfigupload:B,sysconfigguide:F}},Z=J,P=Object(d["a"])(Z,a,o,!1,null,null,null);t["default"]=P.exports},bbd1:function(e,t,i){},c794:function(e,t,i){"use strict";var a=i("4990"),o=i.n(a);o.a},f2be:function(e,t,i){}}]);