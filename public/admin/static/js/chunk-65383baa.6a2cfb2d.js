(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65383baa"],{"7d07":function(t,e,a){"use strict";var l=a("feeb"),n=a.n(l);n.a},c83e:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"微信分享配置",lazy:!0}},[a("config-index")],1)],1)],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-table",{attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"页面",prop:"name","min-width":"120"}}),a("el-table-column",{attrs:{label:"分享语句",prop:"content","min-width":"200"}}),a("el-table-column",{attrs:{align:"center",label:"显示图片","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return["self"===e.row.img?a("span",[t._v(t._s(e.row.img_self_cn))]):a("span",[t._v("网站Logo")])]}}])}),a("el-table-column",{attrs:{label:"说明文字",prop:"explain","min-width":"200"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.funEdit(e.$index,e.row)}}},[t._v(" 编辑 ")])]}}])})],1),t.dialogFormVisible?a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",staticClass:"common-form",attrs:{model:t.form,"label-width":"120px",rules:t.rules,"inline-message":!1}},[a("el-form-item",{attrs:{label:"页面",prop:"name"}},[a("el-input",{attrs:{disabled:"",readonly:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"分享语句",prop:"content"}},[a("el-input",{attrs:{id:"form_content",type:"textarea",rows:"4"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),a("div",{staticClass:"clearfix"}),t._l(t.form.params_arr,(function(e,l){return a("el-tag",{key:l,staticClass:"param_tag",attrs:{size:"small"},on:{click:function(a){return t.handlerTag("content",e)}}},[t._v(" "+t._s(e.label)+" ")])}))],2),a("el-form-item",{attrs:{label:"显示图片"}},[a("el-radio-group",{model:{value:t.form.img,callback:function(e){t.$set(t.form,"img",e)},expression:"form.img"}},[""!=t.form.img_self_cn?a("el-radio",{attrs:{label:"self"}},[t._v(" "+t._s(t.form.img_self_cn)+" ")]):t._e(),a("el-radio",{attrs:{label:"logo"}},[t._v(" 网站Logo ")])],1)],1),a("el-form-item",{attrs:{label:"说明文字",prop:"explain"}},[a("el-input",{attrs:{id:"form_explain",type:"textarea",rows:"4"},model:{value:t.form.explain,callback:function(e){t.$set(t.form,"explain",e)},expression:"form.explain"}}),a("div",{staticClass:"clearfix"}),t._l(t.form.params_arr,(function(e,l){return a("el-tag",{key:l,staticClass:"param_tag",attrs:{size:"small"},on:{click:function(a){return t.handlerTag("explain",e)}}},[t._v(" "+t._s(e.label)+" ")])}))],2),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v(" 保存 ")]),a("el-button",{on:{click:t.closeDialog}},[t._v(" 取 消 ")])],1)],1)],1):t._e()],1)},r=[],o=a("5530"),s=a("b775"),c=a("d722");function m(t){return Object(s["a"])({url:c["a"].wechatShareList,method:"get",params:t})}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==e?Object(s["a"])({url:c["a"].wechatShareEdit,method:e,data:t}):Object(s["a"])({url:c["a"].wechatShareEdit,method:e,params:t})}var u={data:function(){return{dialogFormVisible:!1,infoLoading:!0,list:null,listLoading:!0,form:{id:"",name:"",content:"",img:"",img_self_cn:"",explain:"",params:"",params_arr:[]},rules:{name:[{required:!0,message:"请输入页面",trigger:"blur"},{max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,m({},"get").then((function(e){t.list=e.data.items,t.listLoading=!1})).catch((function(){}))},onSubmit:function(t){var e=this,a=this,l=Object(o["a"])({},a.form);this.$refs[t].validate((function(t){if(!t)return!1;f(l).then((function(t){return e.$message.success(t.message),e.closeDialog(),e.fetchData(),!0})).catch((function(){}))}))},funEdit:function(t,e){this.form=e,console.log(this.form),this.form.params_arr=JSON.parse(this.form.params),this.dialogTitle="编辑",this.dialogFormVisible=!0},closeDialog:function(){this.dialogFormVisible=!1},handlerTag:function(t,e){var a="{"+e.value+"}",l=document.getElementById("form_"+t),n=l.selectionStart,i=l.selectionEnd;if(void 0!==n&&void 0!==i){var r=l.value,o=r.substring(0,n)+a+r.substring(i);l.value=o,l.focus(),l.selectionStart=n+a.length,l.selectionEnd=n+a.length,this.form[t]=o}}}},d=u,p=(a("7d07"),a("2877")),b=Object(p["a"])(d,i,r,!1,null,"1fc85b11",null),g=b.exports,h={components:{configIndex:g}},_=h,v=Object(p["a"])(_,l,n,!1,null,null,null);e["default"]=v.exports},feeb:function(t,e,a){}}]);