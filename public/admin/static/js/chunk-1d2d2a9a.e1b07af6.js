(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d2d2a9a"],{"138e":function(t,e,l){},2723:function(t,e,l){"use strict";l.r(e);var n=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"app-container"},[l("el-card",{staticClass:"box-card"},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[t._v("休眠用户提醒")])]),l("el-form",{ref:"form",staticClass:"common-form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"会员类型"}},[l("el-radio-group",{model:{value:t.form.utype,callback:function(e){t.$set(t.form,"utype",e)},expression:"form.utype"}},[l("el-radio",{attrs:{label:1}},[t._v(" 企业 ")]),l("el-radio",{attrs:{label:2}},[t._v(" 个人 ")])],1)],1),l("el-form-item",{attrs:{label:"未登录",prop:"no_login"}},[l("el-select",{staticClass:"large",attrs:{placeholder:"不限"},model:{value:t.form.no_login,callback:function(e){t.$set(t.form,"no_login",e)},expression:"form.no_login"}},[l("el-option",{attrs:{label:"不限",value:-1}}),l("el-option",{attrs:{label:"3天",value:3}}),l("el-option",{attrs:{label:"7天",value:7}}),l("el-option",{attrs:{label:"15天",value:15}}),l("el-option",{attrs:{label:"30天",value:30}}),l("el-option",{attrs:{label:"90天",value:90}}),l("el-option",{attrs:{label:"180天",value:180}})],1)],1),l("el-form-item",{attrs:{label:"未刷新",prop:"no_refresh"}},[l("el-select",{staticClass:"large",attrs:{placeholder:"不限"},model:{value:t.form.no_refresh,callback:function(e){t.$set(t.form,"no_refresh",e)},expression:"form.no_refresh"}},[l("el-option",{attrs:{label:"不限",value:-1}}),l("el-option",{attrs:{label:"3天",value:3}}),l("el-option",{attrs:{label:"7天",value:7}}),l("el-option",{attrs:{label:"15天",value:15}}),l("el-option",{attrs:{label:"30天",value:30}}),l("el-option",{attrs:{label:"90天",value:90}}),l("el-option",{attrs:{label:"180天",value:180}})],1)],1),2==t.form.utype?l("el-form-item",{attrs:{label:"未完善项",prop:"module"}},[l("el-select",{staticClass:"large",attrs:{multiple:"",placeholder:"不限"},model:{value:t.form.module,callback:function(e){t.$set(t.form,"module",e)},expression:"form.module"}},t._l(t.options_module,(function(t){return l("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),1==t.form.utype?l("el-form-item",{attrs:{label:"职位状态"}},[l("el-radio-group",{model:{value:t.form.publish_job,callback:function(e){t.$set(t.form,"publish_job",e)},expression:"form.publish_job"}},[l("el-radio",{attrs:{label:1}},[t._v(" 已发布 ")]),l("el-radio",{attrs:{label:0}},[t._v(" 未发布 ")])],1)],1):t._e(),l("el-divider",{attrs:{"content-position":"left"}},[t._v("发送设置")]),l("sendConfig",{ref:"sendConfig"}),l("el-form-item",{attrs:{label:""}},[l("el-button",{attrs:{type:"primary",loading:t.submiting},on:{click:function(e){return t.onSubmit("form")}}},[t._v(" 生成任务 ")])],1)],1)],1)],1)},o=[],r=l("5530"),a=l("52b5"),i=l("e75a"),s=l("4124"),c={components:{sendConfig:i["a"]},data:function(){return{submiting:!1,options_module:[],data:{target:"remind",title:"",content:"",send_type:[],condition:null},form:{no_login:-1,no_refresh:-1,module:[],publish_job:0,utype:1},rules:{}}},created:function(){this.fetchInfo()},methods:{fetchInfo:function(){var t=this;Object(a["a"])({type:"resumeModule"}).then((function(e){t.options_module=e.data})).catch((function(){}))},onSubmit:function(t){var e=this;e.$refs[t].validate((function(t){if(!t)return!1;e.$refs.sendConfig.$refs["form"].validate((function(t){if(!t)return!1;if(!0===e.submiting)return!1;e.submiting=!0;var l=Object(r["a"])({},e.$refs.sendConfig.form),n=l.title,o=l.content,a=l.send_type;e.data.title=n,e.data.content=o,e.data.send_type=a,e.data.condition=Object(r["a"])({},e.form);var i=Object(r["a"])({},e.data);Object(s["b"])(i).then((function(t){return e.submiting=!1,e.$message.success(t.message),setTimeout((function(){e.$router.push("/tool/market/list")}),1500),!0})).catch((function(){e.submiting=!1}))}))}))}}},u=c,f=(l("c885"),l("2877")),m=Object(f["a"])(u,n,o,!1,null,"48c58570",null);e["default"]=m.exports},4124:function(t,e,l){"use strict";l.d(e,"i",(function(){return r})),l.d(e,"f",(function(){return a})),l.d(e,"h",(function(){return i})),l.d(e,"g",(function(){return s})),l.d(e,"d",(function(){return c})),l.d(e,"b",(function(){return u})),l.d(e,"c",(function(){return f})),l.d(e,"e",(function(){return m})),l.d(e,"a",(function(){return d}));var n=l("b775"),o=l("d722");function r(t){return Object(n["a"])({url:o["a"].marketTplList,method:"get",params:t})}function a(t){return Object(n["a"])({url:o["a"].marketTplAdd,method:"post",data:t})}function i(t){return Object(n["a"])({url:o["a"].marketTplEdit,method:"post",data:t})}function s(t){return Object(n["a"])({url:o["a"].marketTplDelete,method:"post",data:t})}function c(t){return Object(n["a"])({url:o["a"].marketTaskList,method:"get",params:t})}function u(t){return Object(n["a"])({url:o["a"].marketTaskAdd,method:"post",data:t})}function f(t){return Object(n["a"])({url:o["a"].marketTaskDelete,method:"post",data:t})}function m(t){return Object(n["a"])({url:o["a"].marketTaskRun,method:"post",data:t})}function d(t){return Object(n["a"])({url:o["a"].marketSearchMember,method:"get",params:t})}},"52b5":function(t,e,l){"use strict";l.d(e,"a",(function(){return r}));var n=l("b775"),o=l("d722");function r(t){return Object(n["a"])({url:o["a"].getClassify,method:"get",params:t})}},8957:function(t,e,l){"use strict";var n=l("138e"),o=l.n(n);o.a},c885:function(t,e,l){"use strict";var n=l("fc0f"),o=l.n(n);o.a},e75a:function(t,e,l){"use strict";var n=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-form",{ref:"form",staticClass:"common-form",attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[l("el-form-item",{attrs:{label:"任务标题",prop:"title"}},[l("el-input",{staticClass:"large",attrs:{placeholder:"请输入内容"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),l("el-form-item",{attrs:{label:"发送渠道",prop:"send_type"}},[l("el-checkbox-group",{model:{value:t.form.send_type,callback:function(e){t.$set(t.form,"send_type",e)},expression:"form.send_type"}},[l("el-checkbox",{attrs:{label:"message"}},[t._v("站内信")]),l("el-checkbox",{attrs:{label:"sms"}},[t._v("短信")]),l("el-checkbox",{attrs:{label:"email"}},[t._v("Email")])],1)],1),l("el-form-item",{attrs:{label:"选择模板"}},[t._l(t.tplList,(function(e,n){return l("el-dropdown",{key:n,attrs:{"split-button":"",type:"text"},on:{click:function(l){return t.funUseTpl(e)}}},[t._v(" "+t._s(e.name)+" "),l("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[l("el-dropdown-item",{nativeOn:{click:function(l){return t.funUseTpl(e)}}},[t._v(" 应用 ")]),l("el-dropdown-item",{nativeOn:{click:function(l){return t.funEditTpl(e)}}},[t._v(" 编辑 ")]),l("el-dropdown-item",{nativeOn:{click:function(l){return t.funDeleteTpl(e)}}},[t._v(" 删除 ")])],1)],1)})),l("el-button",{staticClass:"button-new-tag",staticStyle:{"margin-left":"0"},attrs:{size:"small"},on:{click:t.funAddTpl}},[t._v(" + 新建模板 ")])],2),l("el-form-item",{attrs:{label:"消息内容",prop:"content"}},[l("el-input",{staticClass:"large",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t.dialogVisible?l("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"35%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeDialog}},[l("el-form",{ref:"tplform",staticClass:"common-form",attrs:{model:t.tplform,"label-width":"100px",rules:t.tplrules}},[l("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[l("el-input",{model:{value:t.tplform.name,callback:function(e){t.$set(t.tplform,"name",e)},expression:"tplform.name"}})],1),l("el-form-item",{attrs:{label:"消息内容",prop:"content"}},[l("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.tplform.content,callback:function(e){t.$set(t.tplform,"content",e)},expression:"tplform.content"}})],1),l("el-form-item",{attrs:{label:" "}},[l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveTpl("tplform")}}},[t._v(" 保存 ")]),l("el-button",{on:{click:t.closeDialog}},[t._v("取 消")])],1)],1)],1):t._e()],1)},o=[],r=l("2909"),a=l("5530"),i=l("4124"),s={data:function(){return{tplList:[],form:{title:"",send_type:[],content:""},dialogTitle:"",dialogVisible:!1,tplform:{id:"",name:"",content:""},rules:{title:[{required:!0,message:"请输入任务标题",trigger:"blur"},{max:30,message:"最大 30 个字符",trigger:"blur"}],send_type:[{required:!0,message:"请选择发送渠道",trigger:"change"}],content:[{required:!0,message:"请输入消息内容",trigger:"blur"}]},tplrules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:30,message:"最大 30 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入消息内容",trigger:"blur"}]}}},created:function(){this.fetchTplList()},methods:{funAddTpl:function(){this.dialogTitle="新建模板",this.dialogVisible=!0},funEditTpl:function(t){this.tplform=Object(a["a"])({},t),this.dialogTitle="编辑模板",this.dialogVisible=!0},funDeleteTpl:function(t){var e=this;Object(i["g"])({id:t.id}).then((function(t){return e.fetchTplList(),!0})).catch((function(){}))},funUseTpl:function(t){this.form.content=t.content},addTplSave:function(t,e){var l=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(i["f"])(t).then((function(t){return l.closeDialog(),l.fetchTplList(),!0})).catch((function(){}))}))},editTplSave:function(t,e){var l=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(i["h"])(t).then((function(t){return l.closeDialog(),l.fetchTplList(),!0})).catch((function(){}))}))},saveTpl:function(t){var e=this,l=Object(a["a"])({},e.tplform);parseInt(l.id)>0?e.editTplSave(l,t):e.addTplSave(l,t)},fetchTplList:function(){var t=this;Object(i["i"])({}).then((function(e){return t.tplList=Object(r["a"])(e.data.items),!0})).catch((function(){}))},closeDialog:function(){this.dialogVisible=!1,this.tplform={id:"",name:"",content:""}}}},c=s,u=(l("8957"),l("2877")),f=Object(u["a"])(c,n,o,!1,null,"471afdc9",null);e["a"]=f.exports},fc0f:function(t,e,l){}}]);